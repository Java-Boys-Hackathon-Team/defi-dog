<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      title="Audit">

    <data>
        <collection id="sourceCodeChangesDc" class="ru.javaboys.defidog.entity.SourceCodeChangeSet"/>
        <collection id="abiChangesDc" class="ru.javaboys.defidog.entity.AbiChangeSet"/>
    </data>

    <layout>
        <!-- ÐšÐ¾Ñ€Ð½ÐµÐ²Ð°Ñ Ð¾Ð±ÐµÑ€Ñ‚ÐºÐ° -->
        <vbox id="root" width="100%" height="100%" padding="false">

            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº: Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð° Ð¸ ÑÑ‚Ð°Ñ‚ÑƒÑ -->
            <hbox id="header"
                  width="100%"
                  justifyContent="BETWEEN"
                  alignItems="CENTER"
                  classNames="protocol-header bordered-box px-l py-m gap-l rounded-xl shadow-m bg-surface-1">

                <!-- Ð›ÐµÐ²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ: ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ -->
                <vbox classNames="gap-xs">
                    <h3 id="protocolNameH3" classNames="text-2xl font-bold text-primary"/>
                    <p id="protocolDescriptionP" classNames="text-body text-secondary"/>
                </vbox>

                <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ: Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° -->
                <hbox id="statusWrapper" alignItems="CENTER" classNames="gap-s">
                    <div id="statusDot" classNames="fancy-dot"/>
                    <span id="statusLabel" text="Unknown" classNames="text-secondary"/>
                </hbox>
            </hbox>

            <!-- Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹ Ð±Ð»Ð¾Ðº: Ð³Ñ€Ð°Ñ„ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ ÐºÐ¾Ð´Ð° -->
            <hbox id="middleSection" width="100%" classNames="bordered-box">
                <div id="graphContainer" width="50%" height="400px"/>
                <vbox id="codeEditorsWrapper" width="50%" height="400px" spacing="false" classNames="relative-container">

                    <!-- Ð‘Ð»Ð¾Ðº Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð° -->
                    <div id="sourceCodeWrapper" classNames="relative-container" width="100%" height="60%">
                        <codeEditor id="sourceCodeEditor" width="100%" height="100%" label="Ð˜ÑÑ…Ð¾Ð´Ð½Ñ‹Ð¹ ÐºÐ¾Ð´ ÑÐ¼Ð°Ñ€Ñ‚-ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°"/>
                        <button id="copyCodeBtn"
                                text="ðŸ“‹"
                                title="Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸ÑÑ…Ð¾Ð´Ð½Ñ‹Ð¹ ÐºÐ¾Ð´"
                                classNames="copy-button"/>
                    </div>

                    <!-- Ð‘Ð»Ð¾Ðº ABI ÐºÐ¾Ð´Ð° -->
                    <div id="abiCodeWrapper" classNames="relative-container mt-xs" width="100%" height="40%">
                        <codeEditor id="abiCodeEditor" width="100%" height="100%" label="ABI-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ"/>
                        <button id="copyAbiBtn"
                                text="ðŸ“‹"
                                title="Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ABI"
                                classNames="copy-button"/>
                    </div>

                </vbox>
            </hbox>

            <!-- Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ ABI -->
            <details id="abiHistoryCard"
                     summaryText="Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ ABI"
                     classNames="history-section"
                     width="100%" height="100%">
                <dataGrid id="abiHistoryGrid"
                          width="100%" height="200px"
                          dataContainer="abiChangesDc"
                          columnReorderingAllowed="true"
                          themeNames="column-borders">
                    <columns>
                        <column property="id" header="ID" resizable="true"/>
                        <column property="createdDate" header="Ð”Ð°Ñ‚Ð°" resizable="true"/>
                        <column property="changeSummary" header="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹" resizable="true"/>
                        <column property="auditReport.summary" header="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð°ÑƒÐ´Ð¸Ñ‚Ð°" resizable="true"/>
                        <column property="auditReport.criticality" header="ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ" resizable="true"/>
                    </columns>
                </dataGrid>
            </details>

            <!-- Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð° -->
            <details id="sourceCodeHistoryCard"
                     summaryText="Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð°"
                     classNames="history-section mt-m"
                     width="100%" height="100%">
                <dataGrid id="sourceCodeHistoryGrid"
                          width="100%" height="200px"
                          dataContainer="sourceCodeChangesDc"
                          columnReorderingAllowed="true"
                          themeNames="column-borders">
                    <columns>
                        <column property="id" header="ID" resizable="true"/>
                        <column property="createdDate" header="Ð”Ð°Ñ‚Ð°" resizable="true"/>
                        <column property="commitHash" header="ÐšÐ¾Ð¼Ð¼Ð¸Ñ‚" resizable="true"/>
                        <column property="changeSummary" header="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹" resizable="true"/>
                        <column property="auditReport.summary" header="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð°ÑƒÐ´Ð¸Ñ‚Ð°" resizable="true"/>
                        <column property="auditReport.criticality" header="ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ" resizable="true"/>
                    </columns>
                </dataGrid>
            </details>
        </vbox>
    </layout>
</view>