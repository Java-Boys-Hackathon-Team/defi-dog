<view xmlns="http://jmix.io/schema/flowui/view" title="Audit">
    <data>
        <collection id="sourceCodeChangesDc" class="ru.javaboys.defidog.entity.SourceCodeChangeSet"/>
        <collection id="abiChangesDc" class="ru.javaboys.defidog.entity.AbiChangeSet"/>
    </data>

    <layout>
        <vbox id="root" width="100%" padding="false">

            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <hbox id="header" width="100%" justifyContent="BETWEEN" alignItems="CENTER"
                  classNames="card-section px-l py-m gap-l">
                <vbox classNames="gap-xs">
                    <h3 id="protocolNameH3" classNames="text-2xl font-bold text-primary"/>
                    <p id="protocolDescriptionP" classNames="text-body text-secondary"/>
                </vbox>
                <hbox id="statusWrapper" alignItems="CENTER" classNames="gap-s">
                    <div id="statusDot" classNames="fancy-dot"/>
                    <span id="statusLabel" text="Unknown" classNames="text-secondary"/>
                </hbox>
            </hbox>

            <!-- Markdown + Graph -->
            <hbox width="100%" height="400px" classNames="gap-m mt-m">
                <div id="markdownHtml"
                     classNames="card-section audit-md-box bg-dark rounded-m px-m py-s shadow-s"
                     width="50%" height="100%"/>
                <div id="graphContainer"
                     width="50%" height="100%"/>
            </hbox>

            <!-- ÐšÐ¾Ð´Ð¾Ð²Ñ‹Ðµ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ñ‹ -->
            <hbox id="codeEditorsWrapper" width="100%" height="400px" classNames="gap-m mt-m">

                <!-- Ð‘Ð»Ð¾Ðº Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð° -->
                <vbox id="sourceCodeWrapper" width="50%" height="100%" classNames="relative-container">
                    <codeEditor id="sourceCodeEditor" width="100%" height="100%" label="Ð˜ÑÑ…Ð¾Ð´Ð½Ñ‹Ð¹ ÐºÐ¾Ð´ ÑÐ¼Ð°Ñ€Ñ‚-ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°"/>
                    <button id="copyCodeBtn" text="ðŸ“‹" title="Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸ÑÑ…Ð¾Ð´Ð½Ñ‹Ð¹ ÐºÐ¾Ð´" classNames="copy-button"/>
                </vbox>

                <!-- Ð‘Ð»Ð¾Ðº ABI ÐºÐ¾Ð´Ð° -->
                <vbox id="abiCodeWrapper" width="50%" height="100%" classNames="relative-container">
                    <codeEditor id="abiCodeEditor" width="100%" height="100%" label="ABI-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ"/>
                    <button id="copyAbiBtn" text="ðŸ“‹" title="Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ABI" classNames="copy-button"/>
                </vbox>
            </hbox>

            <!-- Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ ABI -->
            <details id="abiHistoryCard" summaryText="Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ ABI"
                     classNames="card-section history-section mt-m" width="100%" height="auto">
                <dataGrid id="abiHistoryGrid" width="100%" height="200px"
                          dataContainer="abiChangesDc"
                          columnReorderingAllowed="true"
                          themeNames="column-borders">
                    <columns>
                        <column property="id" header="ID"/>
                        <column property="createdDate" header="Ð”Ð°Ñ‚Ð°"/>
                        <column property="changeSummary" header="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹"/>
                    </columns>
                </dataGrid>
            </details>

            <!-- Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð° -->
            <details id="sourceCodeHistoryCard" summaryText="Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð°"
                     classNames="card-section history-section mt-m" width="100%" height="auto">
                <dataGrid id="sourceCodeHistoryGrid" width="100%" height="200px"
                          dataContainer="sourceCodeChangesDc"
                          columnReorderingAllowed="true"
                          themeNames="column-borders">
                    <columns>
                        <column property="id" header="ID"/>
                        <column property="createdDate" header="Ð”Ð°Ñ‚Ð°"/>
                        <column property="commitHash" header="ÐšÐ¾Ð¼Ð¼Ð¸Ñ‚"/>
                        <column property="changeSummary" header="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹"/>
                    </columns>
                </dataGrid>
            </details>

        </vbox>
    </layout>
</view>