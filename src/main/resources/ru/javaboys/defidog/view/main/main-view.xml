<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<mainView xmlns="http://jmix.io/schema/flowui/main-view"
          title="msg://MainView.title">
    <data readOnly="true">
        <collection id="cryptocurrencyDg"
                    class="ru.javaboys.defidog.entity.Cryptocurrency">
<!--            <fetchPlan extends="_local">-->
<!--                <property name="id" fetchPlan="_local"/>-->
<!--            </fetchPlan>-->
            <loader id="cryptocurrencyLoader">
                <query>
                    <![CDATA[select cc from Cryptocurrency cc order by cc.id]]>
                </query>
            </loader>
        </collection>
        <collection id="dexDg"
                    class="ru.javaboys.defidog.entity.DeFiProtocol">
            <!--            <fetchPlan extends="_local">-->
            <!--                <property name="id" fetchPlan="_local"/>-->
            <!--            </fetchPlan>-->
            <loader id="dexLoader">
                <query>
                    <![CDATA[select dp from DeFiProtocol dp order by dp.id]]>
                </query>
            </loader>
        </collection>
    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
        <timer id="timer" delay="30000" autostart="true" repeating="true"/>
    </facets>
    <actions>
        <action id="logoutAction" type="logout"/>
        <action id="updateAction" text="Update"/>
    </actions>
    <appLayout>
        <navigationBar>
            <header id="header" classNames="jmix-main-view-header">
                <drawerToggle id="drawerToggle"
                              classNames="jmix-main-view-drawer-toggle"
                              themeNames="contrast"
                              ariaLabel="msg://drawerToggle.ariaLabel"/>
                <h1 id="viewTitle" classNames="jmix-main-view-title"/>
            </header>
            <dropdownButton id="themeSwitcher"
                            text="Theme" icon="ADJUST"
                            classNames="ms-auto me-m"
                            dropdownIndicatorVisible="false">
                <items>
                    <actionItem id="systemThemeItem">
                        <action id="systemThemeAction"
                                text="System" icon="ADJUST"/>
                    </actionItem>
                    <actionItem id="lightThemeItem">
                        <action id="lightThemeAction"
                                text="Light" icon="SUN_O"/>
                    </actionItem>
                    <actionItem id="darkThemeItem">
                        <action id="darkThemeAction"
                                text="Dark" icon="MOON_O"/>
                    </actionItem>
                </items>
            </dropdownButton>
        </navigationBar>
        <drawerLayout>
            <section id="section" classNames="jmix-main-view-section">
                <h2 id="applicationTitle"
                    classNames="jmix-main-view-application-title">
                    <anchor id="baseLink"
                            href="."
                            text="msg://applicationTitle.text"
                            classNames="jmix-main-view-application-title-base-link"/>
                </h2>
                <nav id="navigation"
                     classNames="jmix-main-view-navigation"
                     ariaLabel="msg://navigation.ariaLabel">
                    <listMenu id="menu"/>
                </nav>
                <footer id="footer" classNames="jmix-main-view-footer">
                    <userIndicator id="userIndicator"/>
                    <button id="logoutButton"
                            action="logoutAction"
                            classNames="jmix-logout-button"/>
                </footer>
            </section>
        </drawerLayout>
        <initialLayout>
            <flexLayout id="topLayout">
                <hbox alignItems="END" classNames="flex-wrap">
                    <comboBox id="blockchainNetworkComboBox"
                              itemsEnum="ru.javaboys.defidog.entity.BlockchainNetwork"
                              label="Select Network"/>
                    <button id="updateButton" action="updateAction"/>
                </hbox>
            </flexLayout>
            <flexLayout id="dataLayoutButtons">
                <button id="cryptocurrenciesButton"
                        text="Cryptocurrencies"/>
                <button id="dexButton"
                        text="DEX"/>
            </flexLayout>
            <dataGrid id="cryptocurrencyGrid" width="100%" minHeight="20em"
                      dataContainer="cryptocurrencyDg">
            </dataGrid>
            <dataGrid id="dexGrid" width="100%" minHeight="20em"
                      dataContainer="dexDg">
            </dataGrid>
        </initialLayout>
    </appLayout>
</mainView>